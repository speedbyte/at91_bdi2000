; bdiGDB configuration file for ST30F774 evaluation board
; -------------------------------------------------------
;

[INIT]
;WREG    CPSR        0x000000d3  ;set superviser mode
;WGPR    15          0x00000000  ;set PC = 0

[TARGET]
CPUTYPE     ARM7TDMI
CLOCK       2                   ; JTAG clock 1 MHz
ENDIAN      LITTLE
TRST        PUSHPULL
RESET       ST30 500            ;special ST30F7xx reset sequence
WAKEUP      1000                ;start after 1000 us
STARTUP     RESET
BREAKMODE   SOFT 0xDFFFDFFF     ;SOFT or HARD, ARM / Thumb break code
;BREAKMODE   HARD
;DEBUGPC     0xA0000000          ;set save PC to internal SRAM

[HOST]
IP          151.120.25.119
FILE        E:\temp\dump16k.bin ;The file to program
FORMAT      BIN 0xA0000000
LOAD        MANUAL
PROMPT      ST30F>

[FLASH]
WORKSPACE   0xA0000000          ;workspace in internal SRAM
CHIPTYPE    ST30F               ;ST30F774 internal flash
CHIPSIZE    0x80000             ;512k internal program flash
BUSWIDTH    32                  ;select 32 for this flash

;FILE        E:\temp\dump256k.bin ;The file to program
;FORMAT      BIN 0x80040000
;ERASE       0x00000F00          ;erase sector B0F8-B0F11

FILE        $st30f774.bin ;The file to program
FORMAT      BIN 0x80000000
ERASE       0x00000FFF          ;erase all sectors of bank 0

[REGS]
FILE        $st30f7xx.def


