; bdiGDB configuration file for Keil MCB2130 (LPC2138) board
; ----------------------------------------------------------
;
[INIT]
WREG    CPSR        0x000000D3  ;select supervisor mode
WGPR    15          0x00000000  ;set PC
WM32    0xE01FC040  0x00000001  ;MEMMAP: User flash mode
;
; Disable PLL for flash programming
WM32    0xE01FC080  0x00000000  ;PLLCON:
WM32    0xE01FC084  0x00000000  ;PLLCFG:
WM32    0xE01FC08C  0x000000AA  ;PLLFEED:
WM32    0xE01FC08C  0x00000055  ;PLLFEED:
DELAY   100
;


[TARGET]
CPUTYPE     ARM7TDMI
;CLOCK       0 4                 ;JTAG clock : start with 1 MHz then use adaptive
CLOCK       4                   ;JTAG clock 1MHz ( < 1/6 of CPU clock )
RESET       HARD  500           ;apply 500 ms RESET
WAKEUP      100                 ;give reset time to complete
;STARTUP     STOP 500            ;let monitor run for 500 ms
ENDIAN      LITTLE              ;memory model (LITTLE | BIG)
;BREAKMODE   SOFT 0xDFFFDFFF     ;SOFT or HARD, ARM / Thumb break code
BREAKMODE   HARD                ;SOFT or HARD, ARM / Thumb break code


[HOST]
IP          151.120.25.119
FILE        E:\cygwin\home\demo\pid7t\fibo.x
FORMAT      ELF
LOAD        MANUAL
PROMPT      LPC2138>

[FLASH]
CHIPTYPE    LPC2000 12000       ;select LPC2100 flash, fsys = 12.000 MHz
CHIPSIZE    0x80000             ;select LPC213x sector layout
WORKSPACE   0x40001000          ;internal SRAM for buffer, code and stack

;FILE        E:\temp\dump16k.bin
;FORMAT      BIN 0x00004000
;ERASE       0x000000F0 BLANK    ;erase sector 4...7 with blank check

FILE        E:\cygwin\home\bdidemo\arm\mcb2130.bin
FORMAT      BIN 0x00000000
ERASE       0x007FFFFF BLANK    ;erase sector 0...26 with blank check



[REGS]
FILE	E:\cygwin\home\bdidemo\arm\reg2100.def

