; bdiGDB configuration file for MAC7100 EVB
; -----------------------------------------
; CS0 selects 128k SRAM  @ 0x00000000
; CS1 selects  2MB Flash @ 0x01000000
; CS2 not used
; CLOCK OUT is 8.00 MHz
;
[INIT]
; Setup memory controller
WM16    0xFC008080  0x0000	;CSAR0: CS0 at 0x00000000
WM16    0xFC00808A  0x15A0	;CSCR0: CS0 5 waits, 16bit
WM32    0xFC008084  0x001F0001	;CSMR0: CS0 2MB, R/W, valid
WM16    0xFC00808C  0x0100	;CSAR1: CS1 at 0x01000000
WM16    0xFC008096  0x15A0	;CSCR1: CS1 5 waits, 16bit
WM32    0xFC008090  0x001F0001	;CSMR1: CS1 2MB, R/W, valid
WM16    0xFC008098  0x0200	;CSAR2: CS2 at 0x02000000
WM16    0xFC0080A2  0x15A0	;CSCR2: CS2 5 waits, 16bit
WM32    0xFC00809C  0x001F0001	;CSMR2: CS2 2MB, R/W, valid
;
; Enable internal flash programming
WM32    0xFC0F0010  0x00000000	;CFMPROT  : disable code flash protection
WM8     0xFC0F0044  0x00      	;CFMDFPROT: disable data flash protection
;
;
; Speed-up to fsys = 50MHz
WM8     0xFC088001  0x07      	;REFDV : divide   by 8
WM8     0xFC088000  0x18      	;SYNR  : multiply by 25
DELAY   100                     ;let the PLL lock
WM8     0xFC088005  0x80      	;CLKSEL: Select PLL
WM8     0xFC088003  0x72      	;CRGFLG: Clear the flags
;

[TARGET]
CPUTYPE     MAC7100
CLOCK       3 4                 ;select 4MHz JTAG clock, init with 1MHz
DEBUGPC     0x40000000          ;set save PC to internal SRAM
ENDIAN      BIG                 ;memory model (LITTLE | BIG)
BREAKMODE   SOFT 0xDFFFDFFF     ;SOFT or HARD, ARM / Thumb break code
;VECTOR      CATCH
;DCC         7                   ;DCC I/O via TCP port 7

[HOST]
IP          151.120.25.119
FILE        E:\cygwin\home\demo\pid7t\fibo.x
FORMAT      ELF
LOAD        MANUAL    ;load code MANUAL or AUTO after reset

[FLASH]
; External Flash at 0x01000000
; ============================
;WORKSPACE   0x40000000         ;workspace in internal SRAM for fast programming algorithm
;CHIPTYPE    AM29BX16           ;Flash is AM29F160DB
;CHIPSIZE    0x200000           ;The size of one flash chip in bytes
;BUSWIDTH    16                 ;The width of the flash memory bus in bits (8 | 16 | 32)
;FILE        E:\cygwin\home\bdidemo\arm\mac7100.cfg  ;The file to program
;FORMAT      BIN 0x01000000
;ERASE       0x01000000         ;erase sector 0
;ERASE       0x01004000         ;erase sector 1
;ERASE       0x01006000         ;erase sector 2
;ERASE       0x01008000         ;erase sector 3
;ERASE       0x01010000         ;erase sector 4
;ERASE       0x01020000         ;erase sector 5
;ERASE       0x01030000         ;erase sector 6
;ERASE       0x01040000         ;erase sector 7
;ERASE       0x01050000         ;erase sector 8
;ERASE       0x01060000         ;erase sector 9
;ERASE       0x01070000         ;erase sector 10
;
; Internal Program Flash at 0xfc100000
; ====================================
;WORKSPACE   0x40000000          ;workspace in internal SRAM for fast programming algorithm
;CHIPTYPE    CFM32 8000          ;select Program flash, fsys = 8MHz
CHIPTYPE    CFM32 50000         ;select Program flash, fsys = 50MHz
CHIPSIZE    0x80000             ;512k internal program flash
BUSWIDTH    32                  ;The width of the flash memory bus in bits (8 | 16 | 32)
RECOVER     19                  ;Do JTAG lockout recovery if necessary, CLKD for fsys = 8MHz
;FILE        E:\cygwin\home\bdidemo\arm\mac7100.cfg  ;The file to program
;FORMAT      BIN 0xfc101000      ;do not secure the device !!!
;ERASE       0xfc100000 PAGE     ;erase page 0 (security byte will be restored)
;ERASE       0xfc101000 PAGE     ;erase page 1
;ERASE       0xfc102000 PAGE     ;erase page 2
;ERASE       0xfc103000 PAGE     ;erase page 3
;
WORKSPACE   0x40000002          ;use PIM errata save programming mode
FILE        D:\abatron\bdi360\arm\pro\devices.cpp
FORMAT      BIN 0xfc110000
ERASE       0xfc100000 MASS     ;mass erase (security byte will be restored)
;
; Internal Data Flash at 0xfe000000
; =================================
;WORKSPACE   0x40000000          ;workspace in internal SRAM for fast programming algorithm
;CHIPTYPE    CFM16 8000          ;select Data flash, fsys = 8MHz
;CHIPTYPE    CFM16 50000         ;select Data flash, fsys = 50MHz
;CHIPSIZE    0x8000              ;32k internal data flash
;BUSWIDTH    16                  ;The width of the flash memory bus in bits (8 | 16 | 32)
;FILE        E:\cygwin\home\bdidemo\arm\mac7100.cfg  ;The file to program
;FORMAT      BIN 0xfe000000
;ERASE       0xfe000000 PAGE     ;erase page 0
;ERASE       0xfe000400 PAGE     ;erase page 1
;ERASE       0xfe000800 PAGE     ;erase page 2
;ERASE       0xfe000c00 PAGE     ;erase page 3
;ERASE       0xfe001000 PAGE     ;erase page 4
;ERASE       0xfe001400 PAGE     ;erase page 5
;ERASE       0xfe001800 PAGE     ;erase page 6
;ERASE       0xfe001c00 PAGE     ;erase page 7
;


[REGS]
FILE	E:\cygwin\home\bdidemo\arm\reg7100.def


